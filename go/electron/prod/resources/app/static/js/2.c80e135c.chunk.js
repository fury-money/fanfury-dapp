(this.webpackJsonp=this.webpackJsonp||[]).push([[2],{2810:function(e,t){},2886:function(e,t,n){"use strict";n.r(t),n.d(t,"SwapHeader",(function(){return Be})),n.d(t,"SwapView",(function(){return De}));var o=n(3),r=n.n(o),s=n(10),i=n.n(s),l=n(11),a=n.n(l),c=n(59),u=n(0),d=n(13),p=n(111),f=n(27),m=n(4),j=n(26),b=n(9),O=n(6),h=n(12),g=n(1),y=function(e){var t=e.amount,n=e.amountUsd,o=e.isApproximate;return Object(g.jsxs)(m.default,{children:[Object(g.jsxs)(b.BrandText,{style:[{textAlign:"right"},h.fontSemibold20,(!t||!o)&&{color:O.neutralA3}],children:[o&&"\u2248 ",t?parseFloat(t.toFixed(6)).toString():"0"]}),Object(g.jsxs)(b.BrandText,{style:[{color:O.neutralA3,textAlign:"right"},h.fontSemibold14],children:[o&&"\u2248 "," $",parseFloat(n.toFixed(2).toString())]})]})},x=n(141),v=n(172),w=n(200),k=n(23),S=n(151),C=n(15),A=n(7),P=function(e){var t=e.currency,n=e.selectedNetworkId,o=e.setRef,r=Object(S.useDropdowns)(),s=r.onPressDropdownButton,i=r.isDropdownOpen,l=Object(u.useMemo)((function(){return C.allNetworks.filter((function(e){return e.kind===C.NetworkKind.Cosmos})).find((function(e){return e.stakeCurrency===(null==t?void 0:t.denom)}))}),[null==t?void 0:t.denom]),a=Object(u.useRef)(null);return Object(u.useEffect)((function(){a.current&&o(a)}),[o]),Object(g.jsx)(m.default,{ref:a,children:Object(g.jsxs)(f.default,{onPress:function(){return s(a)},style:{flexDirection:"row",alignItems:"center"},children:[Object(g.jsx)(w.CurrencyIcon,{icon:null==t?void 0:t.icon,size:48,denom:(null==t?void 0:t.denom)||"",networkId:n}),Object(g.jsxs)(m.default,{style:{marginLeft:A.layout.padding_x1_5},children:[Object(g.jsxs)(m.default,{style:{flexDirection:"row",alignItems:"center"},children:[Object(g.jsx)(b.BrandText,{style:{marginRight:A.layout.padding_x1},children:null==t?void 0:t.displayName}),Object(g.jsx)(k.SVG,{source:i(a)?v.default:x.default,width:16,height:16,color:O.secondaryColor})]}),Object(g.jsx)(b.BrandText,{style:[h.fontSemibold13,{color:O.neutralA3}],children:null==l?void 0:l.displayName})]})]})})},F=n(61),I=n(76),B=n(33),D=n(18);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N,_=function(e){var t=e.slippage,n=e.fee,o=e.feeAmountOutUsd,r=e.expectedAmountOut,s=e.spotPrice,i=e.tokenNameIn,l=e.tokenNameOut,c=e.amountIn,d=Object(u.useState)(!1),p=a()(d,2),f=p[0],j=p[1];return Object(u.useEffect)((function(){c||j(!1)}),[c]),Object(g.jsx)(F.default,{onPress:function(){return j((function(e){return!e&&!!c}))},style:{width:"100%"},children:Object(g.jsxs)(B.TertiaryBox,{fullWidth:!0,mainContainerStyle:{padding:A.layout.padding_x2},children:[Object(g.jsxs)(m.default,{style:M.row,children:[Object(g.jsxs)(b.BrandText,{style:[h.fontSemibold14,!c&&{color:O.neutralA3}],children:["1 ",i+" ","\u2248"," ","0"!==s&&s?parseFloat(s).toFixed(6):"0"," "+l]}),!!c&&Object(g.jsx)(k.SVG,{source:f?v.default:x.default,width:16,height:16,color:O.secondaryColor})]}),f&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(D.SpacerColumn,{size:2.5}),Object(g.jsx)(D.SpacerColumn,{size:1}),Object(g.jsxs)(m.default,{style:M.row,children:[Object(g.jsxs)(b.BrandText,{style:M.rowLabel,children:["Swap Fee (",(100*n).toFixed(2),"%)"]}),Object(g.jsxs)(b.BrandText,{style:M.rowValue,children:["\u2248"," ",o<.01?"< $0.01":"$"+o.toFixed(2)]})]}),Object(g.jsx)(D.SpacerColumn,{size:2}),Object(g.jsx)(I.Separator,{}),Object(g.jsx)(D.SpacerColumn,{size:2}),Object(g.jsxs)(m.default,{style:M.row,children:[Object(g.jsx)(b.BrandText,{style:M.rowLabel,children:"Expected Output"}),Object(g.jsxs)(b.BrandText,{style:M.rowValue,children:["\u2248 ",r.toFixed(6)+" "+l]})]}),Object(g.jsx)(D.SpacerColumn,{size:1}),Object(g.jsxs)(m.default,{style:M.row,children:[Object(g.jsxs)(b.BrandText,{style:M.rowLabel,children:["Min received after slippage (",t,"%)"]}),Object(g.jsxs)(b.BrandText,{style:M.rowValue,children:["\u2248"," ",(r-r*t/100).toFixed(6)+" "+l]})]})]})]})})},M=d.default.create({row:{width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},rowLabel:T(T({},d.default.flatten(h.fontSemibold14)),{},{color:O.neutral77}),rowValue:T({},d.default.flatten(h.fontSemibold14))});function V(){return(V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var L=function(e){return u.createElement("svg",V({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),N||(N=u.createElement("path",{d:"M7.999 14.665a6.667 6.667 0 100-13.333 6.667 6.667 0 000 13.333zM8 10.667V8M8 5.332h.008",stroke:"#777",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"})))},z=n(173),R=n(57),W=n(92);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U,H,X,$=function(e){var t=Object(u.useRef)(new j.default.Value(0)).current;return Object(u.useEffect)((function(){j.default.timing(t,{toValue:1,duration:400,useNativeDriver:!0}).start()}),[t]),Object(g.jsx)(j.default.View,{style:G(G({},e.style),{},{opacity:t}),children:e.children})},K=function(e){var t=e.onPress,n=e.isSelected,o=e.children;return Object(g.jsx)(F.default,{style:[{padding:A.layout.padding_x1,flexDirection:"row",borderRadius:7,height:32,width:64,justifyContent:"center",alignItems:"center"},n&&{backgroundColor:O.primaryColor}],onPress:t,children:o})},Q=function(e){var t=e.settingsOpened,n=e.setSlippageValue,o=Object(u.useState)(!1),r=a()(o,2),s=r[0],i=r[1],l=Object(u.useState)(""),c=a()(l,2),d=c[0],p=c[1],f=Object(u.useState)([{value:1,isSelected:!0},{value:3},{value:5}]),j=a()(f,2),y=j[0],x=j[1],v=Object(u.useState)(!1),w=a()(v,2),S=w[0],C=w[1],P=Object(u.useState)(null),F=a()(P,2),I=F[0],D=F[1],E=function(){var e=[];y.forEach((function(t){t.isSelected=!1,e.push(t)})),C(!0),x(e),n(parseFloat(d))};return Object(u.useEffect)((function(){if(!d)return C(!1),x([{value:1,isSelected:!0},{value:3},{value:5}]),void n(1);E()}),[d]),t?Object(g.jsx)($,{style:{position:"absolute",right:20,top:55},children:Object(g.jsxs)(B.TertiaryBox,{mainContainerStyle:{padding:A.layout.padding_x2_5,alignItems:"flex-start"},width:306,noBrokenCorners:!0,children:[Object(g.jsx)(b.BrandText,{style:h.fontSemibold16,children:"Transaction Settings"}),Object(g.jsxs)(m.default,{style:{flexDirection:"row",alignItems:"center",marginTop:A.layout.padding_x1,marginBottom:A.layout.padding_x2},children:[Object(g.jsx)(b.BrandText,{style:[{marginRight:A.layout.padding_x1,color:O.neutral77},h.fontSemibold14],children:"Slippage tolerance"}),Object(g.jsx)(z.CustomPressable,{onHoverIn:function(){return i(!0)},onHoverOut:function(){return i(!1)},children:Object(g.jsx)(k.SVG,{source:L,width:16,height:16})})]}),Object(g.jsxs)(B.TertiaryBox,{mainContainerStyle:{padding:A.layout.padding_x0_5,flexDirection:"row"},fullWidth:!0,noBrokenCorners:!0,children:[y.map((function(e,t){return Object(g.jsx)(K,{item:e,onPress:function(){return function(e){var t;null==I||null==(t=I.current)||t.blur();var o=[];y.forEach((function(t){t.isSelected=!1,t===e&&(e.isSelected=!0,n(e.value)),o.push(t)})),C(!1),x(o)}(e)},isSelected:e.isSelected,children:Object(g.jsxs)(b.BrandText,{style:[h.fontSemibold14,e.isSelected&&{color:O.primaryTextColor}],children:[e.value,"%"]})},t)})),Object(g.jsxs)(K,{onPress:function(){var e;null==I||null==(e=I.current)||e.focus(),d&&!S&&E()},isSelected:S,children:[Object(g.jsx)(R.TextInputCustom,{setRef:D,label:"",name:"",variant:"noStyle",textInputStyle:[{textAlign:"center",height:"100%",width:d?9*d.length:20,color:S?O.primaryTextColor:O.secondaryColor},h.fontSemibold14],onChangeText:function(e){return function(e){e?Object(W.isFloatText)(e)&&p(e):p("")}(e)},value:d,maxLength:5,placeholder:"2.5"}),Object(g.jsx)(b.BrandText,{style:[h.fontSemibold14,{color:S?O.primaryTextColor:d?O.secondaryColor:O.neutralA3}],children:"%"})]})]}),s&&Object(g.jsx)(B.TertiaryBox,{mainContainerStyle:{padding:A.layout.padding_x2},style:{position:"absolute",left:-36,top:-26},noBrokenCorners:!0,children:Object(g.jsxs)(b.BrandText,{style:h.fontSemibold14,children:["Your transaction will revert if the price changes ","\n","unfavorably by more than this percentage."]})})]})}):Object(g.jsx)(g.Fragment,{})},Y=n(77),J=n(115),Z=n(34),ee=function(e){var t=e.onPressItem,n=e.currency,o=e.networkId,r=Object(Z.default)(),s=Object(J.useBalances)(o,null==r?void 0:r.address),i=Object(u.useMemo)((function(){return s.find((function(e){return e.denom===(null==n?void 0:n.denom)}))}),[null==n?void 0:n.denom,s]),l=Object(u.useMemo)((function(){return Object(C.getNativeCurrency)(o,null==n?void 0:n.denom)}),[null==n?void 0:n.denom,o]),a=Object(u.useMemo)((function(){return C.allNetworks.filter((function(e){return e.kind===C.NetworkKind.Cosmos})).find((function(e){return e.stakeCurrency===(null==l?void 0:l.denom)}))}),[null==l?void 0:l.denom]),d=Object(u.useMemo)((function(){return l&&i?c.Decimal.fromAtomics(i.amount,l.decimals).toFloatApproximation():0}),[i,l]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(D.SpacerColumn,{size:1}),Object(g.jsx)(I.Separator,{}),Object(g.jsx)(D.SpacerColumn,{size:1}),Object(g.jsxs)(f.default,{onPress:t,style:{alignSelf:"flex-start",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[Object(g.jsxs)(m.default,{style:{flexDirection:"row",alignItems:"center"},children:[Object(g.jsx)(w.CurrencyIcon,{size:48,denom:n.denom,networkId:o}),Object(g.jsxs)(m.default,{style:{marginLeft:A.layout.padding_x1_5},children:[Object(g.jsx)(b.BrandText,{children:null==l?void 0:l.displayName}),Object(g.jsx)(b.BrandText,{style:[h.fontSemibold13,{color:O.neutralA3}],children:null==a?void 0:a.displayName})]})]}),Object(g.jsx)(y,{amount:d,amountUsd:(null==i?void 0:i.usdAmount)||0})]})]})},te=function(e){var t=e.isOpened,n=e.close,o=e.width,r=e.currencies,s=e.selectedNetworkId,i=e.setCurrency;return t?Object(g.jsx)(m.default,{style:ne.modalContainer,children:Object(g.jsx)($,{style:{position:"absolute",left:20,top:50},children:Object(g.jsxs)(B.TertiaryBox,{mainContainerStyle:{padding:A.layout.padding_x2_5,alignItems:"flex-start"},width:o-40,noBrokenCorners:!0,children:[Object(g.jsx)(m.default,{style:{flexDirection:"row",width:"100%",justifyContent:"flex-end",marginBottom:A.layout.padding_x1_5},children:Object(g.jsx)(Y.TouchableOpacity,{containerStyle:[{alignSelf:"center"}],style:{justifyContent:"center"},onPress:n,children:Object(g.jsx)(k.SVG,{width:16,height:16,source:v.default})})}),Object(g.jsx)(m.default,{style:{width:"100%"},children:null==r?void 0:r.map((function(e,t){return Object(g.jsx)(ee,{currency:e,networkId:s,onPressItem:function(){i(e),n()}},t)}))})]})})}):Object(g.jsx)(g.Fragment,{})},ne=d.default.create({modalContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, .8)",borderRadius:20}});function oe(){return(oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var re,se,ie,le=function(e){return u.createElement("svg",oe({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),U||(U=u.createElement("rect",{x:.5,y:.5,width:31,height:31,rx:15.5,fill:"#333"})),H||(H=u.createElement("path",{d:"M12 14l4 4 4-4",stroke:"#16BBFF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),X||(X=u.createElement("rect",{x:.5,y:.5,width:31,height:31,rx:15.5,stroke:"#444"})))};function ae(){return(ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var ce,ue,de=function(e){return u.createElement("svg",ae({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),re||(re=u.createElement("rect",{x:31.5,y:31.5,width:31,height:31,rx:15.5,transform:"rotate(-180 31.5 31.5)",fill:"#333"})),se||(se=u.createElement("path",{d:"M20 18l-4-4-4 4",stroke:"#16BBFF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),ie||(ie=u.createElement("rect",{x:31.5,y:31.5,width:31,height:31,rx:15.5,transform:"rotate(-180 31.5 31.5)",stroke:"#444"})))},pe=n(601);function fe(){return(fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var me=function(e){return u.createElement("svg",fe({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),ce||(ce=u.createElement("path",{d:"M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z",stroke:"#777",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"})),ue||(ue=u.createElement("path",{d:"M16.353 8.664l-.915-2.209 1.23-1.454-1.667-1.666-1.446 1.235-2.255-.927-.52-1.975H9.153l-.526 2-2.204.93-1.42-1.263L3.334 5l1.21 1.491-.9 2.215-1.977.461v1.667l2 .546.93 2.203-1.263 1.417L5 16.668l1.493-1.216 2.171.893.503 1.99h1.667l.503-1.99 2.21-.914c.367.263 1.453 1.237 1.453 1.237l1.667-1.667-1.237-1.458.915-2.21 1.988-.517V9.168l-1.98-.504z",stroke:"#777",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round"})))},je=n(363),be=n(45),Oe=n(80),he=n(44),ge=n(317),ye=n(38),xe=n(129),ve=n(2867),we=n(109),ke=n(94),Se=n.n(ke),Ce=n(2214),Ae=function(e,t,n){for(var o=1,r=0;r<((null==(s=Object(C.getNativeCurrency)(t,n))?void 0:s.decimals)||0);r++){var s;o*=10}return Math.round(e*o).toString()},Pe=function(e){var t={};return e.poolAssets.forEach((function(e){t[e.token.denom]=parseFloat(e.token.amount)})),Object(ve.makeLcdPoolPretty)(t,e)};function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=function(e){var t=e.setSettingsOpened,n=e.networkDisplayName;return Object(g.jsxs)(m.default,{style:Ee.headerContainer,children:[Object(g.jsxs)(m.default,{style:Ee.headerLogoTitle,children:[Object(g.jsx)(k.SVG,{source:pe.default,height:32,width:32}),Object(g.jsxs)(b.BrandText,{style:Ee.headerTitle,children:["Swap on ",n||"Osmosis"]})]}),t&&Object(g.jsx)(f.default,{onPress:function(){return t((function(e){return!e}))},children:Object(g.jsx)(k.SVG,{source:me,height:20,width:20})})]})},De=function(){var e=Object(u.useRef)(new j.default.Value(1)).current,t=Object(u.useRef)(new j.default.Value(0)).current,n=Object(u.useRef)(new j.default.Value(0)).current,o=Object(u.useState)(0),r=a()(o,2),s=r[0],l=r[1],d=t.interpolate({inputRange:[0,1],outputRange:[0,-50]}),f=n.interpolate({inputRange:[0,1],outputRange:[0,50]}),h=Object(Z.default)(),x=Object(ye.useSelectedNetworkId)(),v=Object(ye.useSelectedNetworkInfo)(),w=Object(J.useBalances)(x,null==h?void 0:h.address),F=Object(he.useFeedbacks)(),I=F.setToastError,E=F.setToastSuccess,T=C.allNetworks.find((function(e){return"cosmos-hub"===e.id})),N=C.allNetworks.find((function(e){return"teritori"===e.id})),M=Object(u.useMemo)((function(){return null==v?void 0:v.currencies.find((function(e){var t;return(null==(t=Object(C.getNativeCurrency)(x,null==e?void 0:e.denom))?void 0:t.denom)===(null==T?void 0:T.stakeCurrency)}))}),[null==v?void 0:v.currencies,null==T?void 0:T.stakeCurrency,x]),V=Object(u.useMemo)((function(){return null==v?void 0:v.currencies.find((function(e){var t;return(null==(t=Object(C.getNativeCurrency)(x,null==e?void 0:e.denom))?void 0:t.denom)===(null==N?void 0:N.stakeCurrency)}))}),[null==v?void 0:v.currencies,null==N?void 0:N.stakeCurrency,x]);Object(u.useEffect)((function(){G(M),$(V)}),[M,V]);var L=Object(u.useState)(M),R=a()(L,2),q=R[0],G=R[1],U=Object(u.useState)(V),H=a()(U,2),X=H[0],$=H[1],K=Object(u.useMemo)((function(){return Object(C.getNativeCurrency)(x,null==q?void 0:q.denom)}),[null==q?void 0:q.denom,x]),Y=Object(u.useMemo)((function(){return Object(C.getNativeCurrency)(x,null==X?void 0:X.denom)}),[null==X?void 0:X.denom,x]),ee=Object(u.useMemo)((function(){return null==v?void 0:v.currencies.filter((function(e){return(null==q?void 0:q.denom)!==e.denom&&(null==X?void 0:X.denom)!==e.denom&&("ibc"===e.kind&&!e.deprecated||"native"===e.kind)}))}),[null==q?void 0:q.denom,null==X?void 0:X.denom,null==v?void 0:v.currencies]),ne=Object(u.useMemo)((function(){return w.find((function(e){return e.denom===(null==q?void 0:q.denom)}))}),[null==q?void 0:q.denom,w]),oe=Object(u.useMemo)((function(){return K&&ne?c.Decimal.fromAtomics(ne.amount,K.decimals).toString():"0"}),[ne,K]),re=Object(u.useState)(""),se=a()(re,2),ie=se[0],ae=se[1],ce=Object(ge.useCoingeckoPrices)([{networkId:x,denom:null==q?void 0:q.denom},{networkId:x,denom:null==X?void 0:X.denom}]).prices,ue=Object(u.useMemo)((function(){return K&&ie&&0!==parseFloat(ie)&&ce[K.coingeckoId]?parseFloat(ie)*ce[K.coingeckoId].usd:0}),[K,ie,ce]),pe=Object(u.useState)(!1),fe=a()(pe,2),me=fe[0],ke=fe[1],Fe=Object(u.useState)(1),Ie=a()(Fe,2),De=Ie[0],Te=Ie[1],Ne=Object(S.useDropdowns)(),_e=Ne.isDropdownOpen,Me=Ne.closeOpenedDropdown,Ve=Object(u.useState)(null),Le=a()(Ve,2),ze=Le[0],Re=Le[1],We=Object(u.useState)(null),qe=a()(We,2),Ge=qe[0],Ue=qe[1],He=function(){var e=i()((function*(){var e=yield $e(parseFloat(ie),Ye,De);ke(!1),null!=e&&e.isError?I({title:(null==e?void 0:e.title)||"Error",message:(null==e?void 0:e.message)||"Error"}):(E({title:(null==e?void 0:e.title)||"Success",message:""}),ae(""))}));return function(){return e.apply(this,arguments)}}(),Xe=function(e,t){var n,o,r=Object(Z.default)(),s=Object(ye.useSelectedNetworkId)(),l=Object(C.getCosmosNetwork)(s),c=Object(u.useState)(!1),d=a()(c,2),p=d[0],f=d[1],m=Object(u.useState)(),j=a()(m,2),b=j[0],O=j[1],h=Object(u.useState)([]),g=a()(h,2),y=g[0],x=g[1],v=Object(u.useState)(!1),w=a()(v,2),k=w[0],S=w[1],A=new ve.OsmosisApiClient({url:null==l?void 0:l.restEndpoint}),P=Object(we.useQuery)(["lcdPools"],i()((function*(){S(!0);var e=yield A.getPools();return S(!1),e}))).data;Object(u.useEffect)((function(){}),[P]);var F=Object(u.useMemo)((function(){var e=[];return null==P||P.pools.forEach((function(t){if(t.pool_assets&&(t.poolAssets=t.pool_assets),t.total_weight&&(t.totalWeight=t.total_weight),t.pool_params&&(t.poolParams=t.pool_params),t.pool_params.swap_fee&&(t.poolParams.swapFee=t.pool_params.swap_fee),"/osmosis.gamm.v1beta1.Pool"===t["@type"]&&t.poolAssets&&2===t.poolAssets.length){var n=!1,o=!1;ve.assets.forEach((function(e){e.base===t.poolAssets[0].token.denom&&(n=!0),e.base===t.poolAssets[1].token.denom&&(o=!0)})),n&&o&&e.push(t)}})),e}),[null==P?void 0:P.pools]);Object(u.useEffect)((function(){if(null!=e&&e.denom&&null!=t&&t.denom&&F){var n,o,r,s=[],i=[];F.forEach((function(o){o.poolAssets.forEach((function(n){n.token.denom===e.denom&&s.push(o),n.token.denom===t.denom&&i.push(o)}));var r=Pe(o);(o.poolAssets[0].token.denom===e.denom&&o.poolAssets[1].token.denom===t.denom||o.poolAssets[1].token.denom===e.denom&&o.poolAssets[0].token.denom===t.denom)&&(!n||parseFloat(r.liquidity||"0")>parseFloat(Pe(n).liquidity||"0"))&&(n=o)})),n&&O(n),s.forEach((function(n){var s;parseFloat((null==(s=n.poolAssets.find((function(e){return"uosmo"===e.token.denom})))?void 0:s.token.amount)||"1")/1e6<1||parseFloat(Pe(n).liquidity)<1e10||i.forEach((function(s){var i,l,a;parseFloat((null==(i=s.poolAssets.find((function(e){return"uosmo"===e.token.denom})))?void 0:i.token.amount)||"1")/1e6<1||parseFloat(Pe(s).liquidity)<1e10||(n.poolAssets[0].token.denom!==e.denom&&n.poolAssets[0].token.denom!==t.denom&&s.poolAssets[0].token.denom!==e.denom&&s.poolAssets[0].token.denom!==t.denom&&n.poolAssets[0].token.denom===s.poolAssets[0].token.denom||n.poolAssets[1].token.denom!==e.denom&&n.poolAssets[1].token.denom!==t.denom&&s.poolAssets[1].token.denom!==e.denom&&s.poolAssets[1].token.denom!==t.denom&&n.poolAssets[1].token.denom===s.poolAssets[1].token.denom||n.poolAssets[0].token.denom!==e.denom&&n.poolAssets[0].token.denom!==t.denom&&s.poolAssets[1].token.denom!==e.denom&&s.poolAssets[1].token.denom!==t.denom&&n.poolAssets[0].token.denom===s.poolAssets[1].token.denom||n.poolAssets[1].token.denom!==e.denom&&n.poolAssets[1].token.denom!==t.denom&&s.poolAssets[0].token.denom!==e.denom&&s.poolAssets[0].token.denom!==t.denom&&n.poolAssets[1].token.denom===s.poolAssets[0].token.denom)&&parseFloat(n.poolParams.swapFee)<parseFloat((null==(l=o)?void 0:l.poolParams.swapFee)||"9999999999")&&parseFloat(s.poolParams.swapFee)<parseFloat((null==(a=r)?void 0:a.poolParams.swapFee)||"9999999999")&&(o=n,r=s)}))})),o&&r&&x([o,r])}}),[null==e?void 0:e.denom,null==t?void 0:t.denom,F]),Object(u.useEffect)((function(){if(y.length||b){if(y.length&&b){var e=parseFloat(y[0].poolParams.swapFee)+parseFloat(y[1].poolParams.swapFee),t=parseFloat(b.poolParams.swapFee);f(!(e>t))}y.length&&!b&&f(!0),!y.length&&b&&f(!1)}}),[y,b]);var I=Object(u.useMemo)((function(){return y.length||b?p?parseFloat(y[0].poolParams.swapFee)+parseFloat(y[1].poolParams.swapFee):parseFloat((null==b?void 0:b.poolParams.swapFee)||"0"):0}),[y,b,p]),B=Object(we.useQuery)(["spotPrice",null==t?void 0:t.denom,null==e?void 0:e.denom,p,null==(n=y[0])?void 0:n.id,null==(o=y[1])?void 0:o.id,null==b?void 0:b.id,null==l?void 0:l.id],i()((function*(){if(!e||!t||!l||(!y[0]||!y[1])&&!b)return"0";S(!0);var n=Ce.osmosis.ClientFactory.createRPCQueryClient,o=yield n({rpcEndpoint:l.rpcEndpoint});if(p){var r,s;if(y.forEach((function(n){n.poolAssets.forEach((function(o){var i,l;o.token.denom===e.denom&&(r={poolId:Se.a.fromString(n.id),quoteAssetDenom:e.denom,baseAssetDenom:(null==(i=n.poolAssets.find((function(t){return t.token.denom!==e.denom})))?void 0:i.token.denom)||""});o.token.denom===t.denom&&(s={poolId:Se.a.fromString(n.id),quoteAssetDenom:(null==(l=n.poolAssets.find((function(e){return e.token.denom!==t.denom})))?void 0:l.token.denom)||"",baseAssetDenom:t.denom})}))})),!r||!s)return"0";var i=yield o.osmosis.gamm.v1beta1.spotPrice(r),a=yield o.osmosis.gamm.v1beta1.spotPrice(s);return S(!1),(parseFloat(i.spotPrice)*parseFloat(a.spotPrice)).toString()}if(b){var c={poolId:Se.a.fromString(b.id),baseAssetDenom:t.denom,quoteAssetDenom:e.denom},u=yield o.osmosis.gamm.v1beta1.spotPrice(c);return S(!1),u.spotPrice}return S(!1),"0"}))).data;return{swap:function(){var n=i()((function*(n,o,i){if(e&&t&&r&&l){var a=Ae(n,s,e.denom),c=Ae(o,s,t.denom),u=Ce.osmosis.gamm.v1beta1.MessageComposer.withTypeUrl.swapExactAmountIn;try{var d=yield Object(C.getKeplrSigner)(l.id),f=yield Object(Ce.getSigningOsmosisClient)({rpcEndpoint:l.rpcEndpoint||"",signer:d}),m=[];p?(y[0].poolAssets[0].token.denom&&m.push({poolId:Se.a.fromString(y[0].id),tokenOutDenom:"uosmo"}),m.push({poolId:Se.a.fromString(y[1].id),tokenOutDenom:t.denom})):m.push({poolId:Se.a.fromString(null==b?void 0:b.id),tokenOutDenom:t.denom});var j=Math.round(parseFloat(Object(ve.calculateAmountWithSlippage)(c,i))).toString(),O=u({sender:r.address||"",routes:m,tokenIn:{denom:e.denom,amount:a},tokenOutMinAmount:j}),h={amount:Object(xe.coins)(1e6*Math.round(I),e.denom),gas:"250000"},g=yield f.signAndBroadcast(r.address||"",[O],h);return Object(xe.isDeliverTxFailure)(g)?(console.error("tx failed",g),{isError:!0,title:"Transaction failed",message:g.rawLog||""}):{title:"Swap succeed",message:""}}catch(x){return console.error("tx failed",x),{isError:!0,title:"Transaction failed",message:x instanceof Error?x.message:""+x}}}}));return function(e,t,o){return n.apply(this,arguments)}}(),spotPrice:B,fee:I,loading:k}}(q,X),$e=Xe.swap,Ke=Xe.spotPrice,Qe=Xe.fee,Ye=Object(u.useMemo)((function(){return ie&&0!==parseFloat(ie)&&Ke?parseFloat(Ke)*parseFloat(ie):0}),[Ke,ie]),Je=Object(u.useMemo)((function(){return Ye-Ye*Qe}),[Ye,Qe]),Ze=Object(u.useMemo)((function(){return Y&&Ye&&ce[Y.coingeckoId]?Ye*Qe*ce[Y.coingeckoId].usd:0}),[Y,Ye,ce,Qe]),et=Object(u.useMemo)((function(){return Y&&Je&&ce[Y.coingeckoId]?Je*ce[Y.coingeckoId].usd:0}),[Y,Je,ce]);return Object(g.jsx)(B.TertiaryBox,{fullWidth:!0,style:{maxWidth:600,alignSelf:"center"},children:Object(g.jsxs)(m.default,{style:{width:"100%"},onLayout:function(e){l(e.nativeEvent.layout.width)},children:[Object(g.jsx)(m.default,{style:{flexDirection:"row",justifyContent:"space-between",width:"100%",padding:A.layout.padding_x2_5},children:Object(g.jsx)(Be,{setSettingsOpened:ke,networkDisplayName:null==v?void 0:v.displayName})}),Object(g.jsxs)(m.default,{style:{width:"100%",paddingHorizontal:A.layout.padding_x2_5},children:[Object(g.jsx)(je.SeparatorGradient,{style:{marginBottom:A.layout.padding_x2_5}}),Object(g.jsxs)(m.default,{style:Ee.childrenContainer,children:[Object(g.jsxs)(m.default,{style:Ee.currencies,children:[Object(g.jsxs)(B.TertiaryBox,{fullWidth:!0,mainContainerStyle:Ee.currencyBoxMainContainer,children:[Object(g.jsxs)(m.default,{style:Ee.counts,children:[Object(g.jsxs)(b.BrandText,{style:Ee.availableAmount,children:["Available"," ",Object(g.jsx)(b.BrandText,{style:{color:O.primaryColor},children:oe})]}),Object(g.jsxs)(m.default,{style:{flexDirection:"row"},children:[Object(g.jsx)(Oe.SecondaryButton,{size:"XS",text:"MAX",onPress:function(){ae(parseFloat(oe).toString())}}),Object(g.jsx)(Oe.SecondaryButton,{onPress:function(){ae((parseFloat(oe)/2).toString())},size:"XS",text:"HALF",touchableStyle:{marginLeft:A.layout.padding_x1}})]})]}),Object(g.jsx)(j.default.View,{style:{opacity:e,width:"100%",transform:[{translateY:f}]},children:Object(g.jsxs)(m.default,{style:Ee.currency,children:[Object(g.jsx)(P,{currency:K,selectedNetworkId:x,setRef:Ue}),Object(g.jsxs)(m.default,{children:[Object(g.jsx)(p.default,{style:Ee.inputAmount,value:ie,placeholder:"0",placeholderTextColor:O.neutralA3,onChangeText:function(e){e?Object(W.isFloatText)(e)&&ae(e):ae("")}}),Object(g.jsxs)(b.BrandText,{style:Ee.amountUsd,children:["\u2248 $",parseFloat(ue.toFixed(2).toString())]})]})]})})]}),Object(g.jsx)(D.SpacerColumn,{size:1.5}),Object(g.jsx)(B.TertiaryBox,{fullWidth:!0,mainContainerStyle:Ee.currencyBoxMainContainer,children:Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(z.CustomPressable,{onPress:function(){j.default.sequence([j.default.timing(e,{toValue:0,duration:200,useNativeDriver:!0}),j.default.timing(e,{toValue:1,duration:200,useNativeDriver:!0})]).start(),j.default.sequence([j.default.timing(n,{toValue:1,duration:200,useNativeDriver:!0}),j.default.timing(n,{toValue:0,duration:200,useNativeDriver:!0})]).start(),j.default.sequence([j.default.timing(t,{toValue:1,duration:200,useNativeDriver:!0}),j.default.timing(t,{toValue:0,duration:200,useNativeDriver:!0})]).start(),setTimeout((function(){G(X),$(q),ae(Je?Je.toFixed(6):"")}),200)},style:Ee.invertButton,children:function(e){var t=e.hovered;return Object(g.jsx)(k.SVG,{source:t?le:de,height:32,width:32})}}),Object(g.jsx)(j.default.View,{style:{opacity:e,width:"100%",transform:[{translateY:d}]},children:Object(g.jsxs)(m.default,{style:Ee.currency,children:[Object(g.jsx)(P,{currency:Y,selectedNetworkId:x,setRef:Re}),Object(g.jsx)(y,{amount:Je,amountUsd:et,isApproximate:!0})]})})]})})]}),Object(g.jsx)(D.SpacerColumn,{size:1.5}),Object(g.jsx)(_,{fee:Qe,spotPrice:Ke||"",amountIn:ie,tokenNameIn:(null==K?void 0:K.displayName)||"",tokenNameOut:(null==Y?void 0:Y.displayName)||"",feeAmountOutUsd:Ze,expectedAmountOut:Je,slippage:De}),Object(g.jsx)(D.SpacerColumn,{size:2.5}),Object(g.jsx)(be.PrimaryButton,{size:"XL",loader:!0,text:ie&&parseFloat(ie)>parseFloat(oe)?"Insufficient balance":"Swap",fullWidth:!0,disabled:!ie||0===parseFloat(ie)||parseFloat(ie)>parseFloat(oe),onPress:He})]})]}),Object(g.jsx)(Q,{settingsOpened:me,setSlippageValue:Te}),Object(g.jsx)(te,{width:s,isOpened:!!ze&&_e(ze),close:Me,currencies:ee,selectedNetworkId:x,setCurrency:$}),Object(g.jsx)(te,{width:s,isOpened:!!Ge&&_e(Ge),close:Me,currencies:ee,selectedNetworkId:x,setCurrency:G})]})})},Ee=d.default.create({loaderContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},loaderBackground:{position:"absolute",top:0,left:0,backgroundColor:O.neutral00,opacity:.6,width:"100%",height:"100%"},loader:{position:"absolute"},headerContainer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",flex:1},headerLogoTitle:{flexDirection:"row",alignItems:"center"},headerTitle:{marginLeft:A.layout.padding_x2},childrenContainer:{alignItems:"center",paddingBottom:A.layout.padding_x2_5},currencyBoxMainContainer:{padding:A.layout.padding_x2},counts:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:A.layout.padding_x2},currencies:{width:"100%"},currency:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},invertButton:{position:"absolute",zIndex:20,top:-24},availableAmount:Ie({color:O.neutral77},d.default.flatten(h.fontSemibold14)),inputAmount:Ie({height:"100%",outlineStyle:"none",color:O.secondaryColor,maxWidth:200,textAlign:"right"},d.default.flatten(h.fontSemibold20)),amount:{textAlign:"right"},amountUsd:Ie({color:O.neutralA3,textAlign:"right"},d.default.flatten(h.fontSemibold14))})}}]);
//# sourceMappingURL=2.c80e135c.chunk.js.map